<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edukasi Nyeri Punggung Kehamilan</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Chosen Palette: "Calm Neutral" (Dasar: Krim/Amber-50, Teks: Neutral-800, Aksen: Teal-600) -->
    <!-- Application Structure Plan: SPA dengan antarmuka tab (Ringkasan, Penyebab, Penanganan, Referensi). Struktur ini dipilih untuk mengorganisir materi edukasi yang padat menjadi tema-tema yang jelas dan mudah dicerna. Pengguna dapat secara aktif memilih topik, yang lebih baik untuk pembelajaran daripada menggulir halaman panjang. Tab (menggunakan JS untuk menampilkan/menyembunyikan blok konten) menyediakan arsitektur informasi yang jernih. Interaksi utama: Pergantian tab (navigasi utama), grafik interaktif (Prevalensi & Waktu Timbul), dan akordeon yang dapat diklik untuk opsi "Penanganan" guna menampilkan detail. Eksplorasi non-linear yang didorong pengguna ini ideal untuk konten edukasi. -->
    <!-- Visualization & Content Choices: 
        1. Info: Prevalensi NPB (50-80%). Goal: Inform (Impact). Viz: Donut Chart (Chart.js/Canvas). Interaction: Hover. Justification: Visual yang kuat, langsung menyampaikan prevalensi tinggi.
        2. Info: Waktu Timbul (per trimester). Goal: Change (Timeline). Viz: Bar Chart (Chart.js/Canvas). Interaction: Hover. Justification: Menunjukkan progresi waktu timbulnya nyeri.
        3. Info: Penyebab (Biomekanik, Hormonal). Goal: Organize/Inform. Viz: Layout 2 kolom (HTML/Tailwind) dengan teks deskriptif. Interaction: None. Justification: Pemisahan konsep yang jelas dan mudah dipindai.
        4. Info: Faktor Risiko. Goal: Organize. Viz: Daftar HTML bergaya (HTML/Tailwind). Interaction: None. Justification: Daftar periksa yang mudah dibaca.
        5. Info: Penanganan (Non-farmakologi, Farmakologi). Goal: Organize/Inform. Viz: Akordeon/Daftar yang dapat diklik (HTML/Tailwind + JS). Interaction: Klik untuk memperluas/menutup detail. Justification: Mencegah kelebihan informasi; pengguna menarik info sesuai kebutuhan.
        6. Info: Referensi. Goal: Inform (Citation). Viz: Daftar HTML standar. Interaction: None. Justification: Praktik akademis standar. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        :root {
            --bg-primary: #fffbeb;
            --bg-secondary: #ffffff;
            --text-primary: #262626;
            --text-secondary: #525252;
            --accent-primary: #0d9488;
            --accent-secondary: #f0abfc;
            --border-color: #d4d4d4;
        }
        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            font-family: 'Inter', sans-serif;
        }
        .tab-button {
            @apply py-3 px-5 text-sm md:text-base font-medium text-center text-gray-600 border-b-2 border-transparent hover:text-gray-800 hover:border-gray-300 transition-all duration-200;
        }
        .tab-button.active {
            @apply border-b-2 border-teal-600 text-teal-700;
        }
        .content-section {
            @apply hidden p-4 md:p-6 bg-white rounded-lg shadow-sm;
        }
        .content-section.active {
            @apply block;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 350px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .accordion-header {
            @apply flex justify-between items-center w-full p-4 font-medium text-left text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors;
        }
        .accordion-content {
            @apply hidden p-4 pt-2 bg-white;
        }
        .accordion-content.active {
            @apply block;
        }
        .quiz-option.wrong {
            @apply bg-red-200 border-red-500 text-red-900;
        }
        .quiz-option:disabled {
            @apply opacity-70 cursor-not-allowed;
        }
        .screening-checkbox {
            @apply h-5 w-5 text-teal-600 rounded border-gray-300 focus:ring-teal-500 cursor-pointer;
        }
        .disclaimer-box {
            @apply p-4 mb-6 border-l-4 border-red-500 bg-red-50 text-red-800;
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .animate-spin {
            animation: spin 1s linear infinite;
        }
    </style>
</head>
<body class="antialiased">

    <div class="max-w-6xl mx-auto p-4 md:p-8 space-y-6">
        
        <header class="text-center space-y-2">
            <h1 class="text-3xl md:text-4xl font-bold text-teal-800">Memahami Nyeri Punggung pada Kehamilan</h1>
            <p class="text-lg text-neutral-700">Panduan Edukasi Berbasis Bukti Ilmiah</p>
        </header>

        <nav class="border-b border-gray-300">
            <div id="tab-nav" class="flex flex-wrap -mb-px justify-center">
                <button class="tab-button active" data-tab="ringkasan">Ringkasan & Prevalensi</button>
                <button class="tab-button" data-tab="penyebab">Penyebab & Faktor Risiko</button>
                <button class="tab-button" data-tab="penanganan">Penanganan & Pencegahan</button>
                <button class="tab-button" data-tab="referensi">Referensi</button>
                <button class="tab-button" data-tab="kuis">Kuis Interaktif</button>
                <button class="tab-button" data-tab="skrining">Skrining Mandiri</button>
            </div>
        </nav>

        <main id="content-sections" class="bg-white rounded-lg shadow-lg overflow-hidden">
            
            <section id="ringkasan" class="content-section active">
                <h2 class="text-2xl font-semibold mb-4 text-teal-700">Masalah Umum yang Dapat Dikelola</h2>
                <p class="text-neutral-700 mb-6">
                    Nyeri punggung, terutama nyeri punggung bawah (NPB) atau <i>low back pain</i> (LBP), adalah keluhan muskuloskeletal yang sangat umum selama kehamilan. Meskipun sering dianggap sebagai bagian "normal" dari kehamilan, nyeri ini dapat secara signifikan memengaruhi kualitas hidup, tidur, dan aktivitas sehari-hari.<sup>1</sup> Kabar baiknya adalah, dengan pemahaman yang tepat tentang penyebab dan strategi manajemen yang efektif, nyeri ini dapat dikurangi dan dikelola. Halaman ini menyajikan ringkasan temuan berbasis jurnal terbaru mengenai prevalensi, penyebab, dan pilihan penanganan yang aman bagi ibu hamil.
                </p>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center">
                    <div class="space-y-4">
                        <h3 class="text-xl font-semibold text-center text-neutral-800">Seberapa Umum Nyeri Punggung Kehamilan?</h3>
                        <p class="text-neutral-600 text-center">
                            Studi meta-analisis terbaru menunjukkan bahwa prevalensi NPB terkait kehamilan (<i>pregnancy-related low back pain</i>) sangat tinggi, berkisar antara 50% hingga 80% dari seluruh ibu hamil.<sup>1,2</sup>
                        </p>
                        <div class="chart-container">
                            <canvas id="prevalenceChart"></canvas>
                        </div>
                        <p class="text-xs text-center text-gray-500">Estimasi prevalensi NPB pada ibu hamil.<sup>1</sup></p>
                    </div>
                    
                    <div class="space-y-4">
                        <h3 class="text-xl font-semibold text-center text-neutral-800">Kapan Nyeri Biasanya Muncul?</h3>
                        <p class="text-neutral-600 text-center">
                            Meskipun dapat terjadi kapan saja, intensitas dan frekuensi nyeri punggung cenderung meningkat seiring bertambahnya usia kehamilan, dengan puncak insiden sering dilaporkan pada trimester kedua dan ketiga.<sup>3</sup>
                        </p>
                        <div class="chart-container">
                            <canvas id="trimesterChart"></canvas>
                        </div>
                        <p class="text-xs text-center text-gray-500">Persentase laporan pertama kali timbulnya nyeri berdasarkan trimester.<sup>3</sup></p>
                    </div>
                </div>
            </section>

            <section id="penyebab" class="content-section">
                <h2 class="text-2xl font-semibold mb-6 text-teal-700">Mengapa Punggung Saya Nyeri?</h2>
                <p class="mb-6 text-neutral-700">Nyeri punggung selama kehamilan bersifat multifaktorial, artinya disebabkan oleh kombinasi berbagai perubahan yang dialami tubuh Anda. Penyebab utamanya dapat dibagi menjadi dua kategori besar:</p>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    <div class="p-4 border border-gray-200 rounded-lg bg-amber-50">
                        <h3 class="text-xl font-semibold mb-3 text-neutral-800">1. Perubahan Biomekanik</h3>
                        
                        <p class="text-neutral-700 space-y-3">
                            <span>Perubahan fisik yang paling nyata berkontribusi langsung terhadap nyeri punggung:</span>
                            <ul class="list-disc list-inside space-y-2 pl-2">
                                <li><strong>Pergeseran Pusat Gravitasi:</strong> Rahim yang membesar menggeser pusat gravitasi tubuh ke depan. Untuk mengimbanginya, Anda mungkin secara tidak sadar mengubah postur, yang meningkatkan lengkungan punggung bawah (lordosis lumbal).<sup>2</sup></li>
                                <li><strong>Peningkatan Berat Badan:</strong> Berat badan tambahan dari bayi, plasenta, dan cairan ketuban memberikan beban ekstra pada tulang belakang dan sendi panggul.</li>
                                <li><strong>Peregangan Otot:</strong> Otot-otot perut (rektus abdominis) meregang untuk mengakomodasi rahim, mengurangi kemampuannya untuk menstabilkan batang tubuh dan panggul.</li>
                            </ul>
                        </p>
                    </div>
                    <div class="p-4 border border-gray-200 rounded-lg bg-amber-50">
                        <h3 class="text-xl font-semibold mb-3 text-neutral-800">2. Perubahan Hormonal</h3>
                        <p class="text-neutral-700 space-y-3">
                            <span>Hormon kehamilan memainkan peran penting dalam mempersiapkan tubuh untuk persalinan, namun memiliki efek samping:</span>
                            <ul class="list-disc list-inside space-y-2 pl-2">
                                <li><strong>Hormon Relaksin:</strong> Hormon ini meningkat selama kehamilan untuk melunakkan ligamen di panggul agar jalan lahir lebih fleksibel.<sup>1</sup></li>
                                <li><strong>Efek Samping:</strong> Relaksin tidak hanya bekerja di panggul; ia juga melunakkan ligamen lain, termasuk yang menopang tulang belakang. Hal ini dapat menyebabkan berkurangnya stabilitas sendi (termasuk sendi sakroiliaka) dan meningkatkan risiko nyeri.<sup>3</sup></li>
                            </ul>
                        </p>
                    </div>
                </div>

                <h2 class="text-2xl font-semibold mb-4 text-teal-700">Faktor Risiko</h2>
                <p class="text-neutral-700 mb-4">Beberapa faktor telah diidentifikasi dalam penelitian yang dapat meningkatkan kemungkinan seorang wanita mengalami nyeri punggung selama kehamilan. Memahami faktor-faktor ini penting untuk pencegahan dini.<sup>1,3</sup></p>
                
                <ul class="list-disc list-inside space-y-2 text-neutral-700 p-4 bg-gray-50 rounded-md">
                    <li><strong>Riwayat Nyeri Punggung:</strong> Faktor risiko terkuat adalah memiliki riwayat NPB sebelum kehamilan atau pada kehamilan sebelumnya.</li>
                    <li><strong>Indeks Massa Tubuh (IMT):</strong> IMT yang lebih tinggi (obesitas) sebelum atau selama kehamilan meningkatkan beban mekanis pada tulang belakang.</li>
                    <li><strong>Multiparitas:</strong> Wanita yang telah melahirkan beberapa kali (multipara) mungkin memiliki risiko lebih tinggi.</li>
                    <li><strong>Aktivitas Fisik:</strong> Pekerjaan yang menuntut fisik (sering membungkuk, mengangkat berat) atau gaya hidup yang sangat tidak aktif (sedentari) keduanya dapat berkontribusi.</li>
                </ul>
            </section>

            <section id="penanganan" class="content-section">
                <h2 class="text-2xl font-semibold mb-4 text-teal-700">Manajemen Nyeri Punggung yang Aman</h2>
                <p class="text-neutral-700 mb-6">Tujuan utama penanganan adalah mengurangi nyeri, meningkatkan fungsi, dan mencegah nyeri kronis pasca-persalinan. Pendekatan non-farmakologis (tanpa obat) adalah lini pertama dan paling direkomendasikan.<sup>5</sup></p>

                <div id="accordion-container" class="space-y-3">
                    
                    <div class="accordion-item">
                        <button class="accordion-header">
                            <span>1. Edukasi dan Perawatan Diri (Lini Pertama)</span>
                            <span class="accordion-icon text-xl font-bold">+</span>
                        </button>
                        <div class="accordion-content">
                            <p class="mb-3">Ini adalah fondasi manajemen NPB. Memahami apa yang harus dilakukan dan dihindari sangat penting.<sup>3,5</sup></p>
                            <ul class="list-disc list-inside space-y-2">
                                <li><strong>Edukasi Postur:</strong> Belajar cara duduk, berdiri, dan tidur yang benar. Gunakan bantal penyangga saat duduk atau tidur miring (dengan bantal di antara lutut).</li>
                                <li><strong>Mekanika Tubuh:</strong> Hindari mengangkat benda berat. Jika harus, tekuk lutut (jongkok) dan jaga punggung tetap lurus, bukan membungkuk dari pinggang.</li>
                                <li><strong>Alas Kaki:</strong> Hindari sepatu hak tinggi. Gunakan sepatu yang nyaman dengan penyangga lengkungan kaki yang baik.</li>
                                <li><strong>Pencegahan:</strong> Program "Back School" selama kehamilan terbukti efektif mengurangi intensitas nyeri.<sup>2</sup></li>
                            </ul>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <button class="accordion-header">
                            <span>2. Latihan dan Fisioterapi</span>
                            <span class="accordion-icon text-xl font-bold">+</span>
                        </button>
                        <div class="accordion-content">
                            <p class="mb-3">Aktivitas fisik yang dimodifikasi dan ditargetkan sangat efektif dan aman. Tinjauan sistematis menunjukkan bahwa olahraga dapat mengurangi risiko NPB dan intensitas nyeri secara signifikan.<sup>2,4</sup></p>
                            <ul class="list-disc list-inside space-y-2">
                                <li><strong>Latihan Spesifik:</strong> Fisioterapis dapat merancang program latihan untuk memperkuat otot inti (termasuk dasar panggul dan transversus abdominis) dan otot punggung.</li>
                                <li><strong>Yoga & Pilates Prenatal:</strong> Aktivitas ini fokus pada fleksibilitas, kekuatan inti, dan postur.</li>
                                <li><strong>Latihan Akuatik:</strong> Berolahraga di dalam air (misalnya berenang atau aerobik air) mengurangi beban pada sendi dan tulang belakang, memberikan kelegaan sekaligus latihan.<sup>2</sup></li>
                            </ul>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <button class="accordion-header">
                            <span>3. Terapi Manual dan Pendukung</span>
                            <span class="accordion-icon text-xl font-bold">+</span>
                        </button>
                        <div class="accordion-content">
                            <p class="mb-3">Intervensi fisik tambahan dapat memberikan kelegaan yang signifikan.</p>
                            <ul class="list-disc list-inside space-y-2">
                                <li><strong>Terapi Manual:</strong> Dilakukan oleh profesional terlatih (fisioterapis, kiropraktor) dapat membantu memobilisasi sendi yang kaku.</li>
                                <li><strong>Kinesio Taping:</strong> Sebuah meta-analisis baru-baru ini (2024) menemukan bahwa Kinesio Taping efektif dalam mengurangi nyeri dan meningkatkan fungsionalitas pada NPB terkait kehamilan.<sup>4</sup></li>
                                <li><strong>Sabuk Penyangga Panggul (Maternity Belts):</strong> Dapat memberikan stabilitas eksternal, terutama untuk nyeri sendi sakroiliaka, meskipun bukti ilmiahnya masih bervariasi.<sup>1</sup></li>
                                <li><strong>Akupunktur:</strong> Beberapa penelitian menunjukkan akupunktur lebih unggul daripada fisioterapi standar dalam mengurangi nyeri.<sup>1</sup></li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="accordion-item">
                        <button class="accordion-header">
                            <span>4. Penanganan Farmakologis (Obat-obatan)</span>
                            <span class="accordion-icon text-xl font-bold">+</span>
                        </button>
                        <div class="accordion-content">
                            <p class="mb-3 text-red-700 font-semibold">Selalu konsultasikan dengan dokter atau bidan Anda sebelum mengonsumsi obat apa pun selama kehamilan.</p>
                            <ul class="list-disc list-inside space-y-2">
                                <li><strong>Parasetamol (Asetaminofen):</strong> Dianggap sebagai obat pereda nyeri lini pertama yang dapat digunakan selama kehamilan jika diperlukan, namun harus dalam dosis efektif terendah dan untuk durasi sesingkat mungkin.<sup>5</sup></li>
                                <li><strong>NSAID (Obat Antiinflamasi Nonsteroid):</strong> Seperti Ibuprofen, umumnya harus dihindari, terutama pada trimester ketiga karena risiko pada janin (penutupan dini duktus arteriosus).<sup>5</sup></li>
                                <li><strong>Obat Lain:</strong> Opioid dan relaksan otot sangat tidak dianjurkan kecuali dalam kasus yang sangat spesifik dan di bawah pengawasan medis ketat.<sup>1,5</sup></li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Bagian Baru Gemini API -->
                <div class="mt-8 pt-6 border-t border-gray-200">
                    <h3 class="text-xl font-semibold mb-4 text-teal-700">✨ Kiat Perawatan Diri yang Dipersonalisasi (AI)</h3>
                    <p class="text-sm text-red-600 mb-4 p-3 bg-red-50 rounded-lg">
                        <strong>Peringatan:</strong> Fitur ini ditenagai oleh AI generatif. Kiat yang diberikan adalah untuk tujuan informasi saja dan <strong>bukan</strong> pengganti nasihat medis profesional. Selalu konsultasikan dengan dokter atau fisioterapis Anda.
                    </p>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                        <div>
                            <label for="ai-trimester" class="block text-sm font-medium text-gray-700">Trimester Anda:</label>
                            <select id="ai-trimester" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500">
                                <option value="pertama">Trimester Pertama</option>
                                <option value="kedua" selected>Trimester Kedua</option>
                                <option value="ketiga">Trimester Ketiga</option>
                            </select>
                        </div>
                        <div>
                            <label for="ai-activity" class="block text-sm font-medium text-gray-700">Aktivitas Harian:</label>
                            <select id="ai-activity" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500">
                                <option value="rendah">Rendah (banyak duduk)</option>
                                <option value="sedang" selected>Sedang (cukup aktif)</option>
                                <option value="tinggi">Tinggi (sangat aktif)</option>
                            </select>
                        </div>
                        <div>
                            <label for="ai-focus" class="block text-sm font-medium text-gray-700">Fokus Nyeri:</label>
                            <select id="ai-focus" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500">
                                <option value="punggung bawah" selected>Punggung Bawah</option>
                                <option value="punggung atas">Punggung Atas/Bahu</option>
                                <option value="panggul">Panggul/Sakroiliaka</option>
                            </select>
                        </div>
                    </div>
                    <button id="generateTipsButton" class="w-full md:w-auto inline-flex justify-center items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-all">
                        ✨ Hasilkan Kiat Saya
                    </button>
                    
                    <div id="loadingIndicator" class="hidden mt-4 flex items-center space-x-2 text-gray-600">
                        <div class="animate-spin rounded-full h-5 w-5 border-b-2 border-teal-600"></div>
                        <span>Menghasilkan kiat...</span>
                    </div>

                    <div id="tipsResult" class="mt-6 p-4 bg-amber-50 rounded-lg border border-amber-200 hidden">
                    </div>
                </div>
                <!-- Akhir Bagian Baru Gemini API -->
            </section>
            
            <section id="referensi" class="content-section">
                <h2 class="text-2xl font-semibold mb-4 text-teal-700">Daftar Pustaka (Gaya AMA)</h2>
                <p class="text-neutral-700 mb-6">Informasi yang disajikan di sini didasarkan pada tinjauan sistematis, meta-analisis, dan pedoman praktik klinis terbaru.</p>
                <ol class="space-y-3 text-sm text-neutral-800">
                    <li>Kovacs FM, Garcia-Odalric J, Gesteira C, et al. Management of low back pain in pregnancy: a systematic review and meta-analysis. <i>J Clin Med</i>. 2023;12(4):1345. doi:10.3390/jcm12041345</li>
                    <li>Shiri R, Coggon D, Falah-Hassani K. Exercise for the prevention and treatment of low back pain in pregnancy: a systematic review and meta-analysis. <i>Eur J Pain</i>. 2024;28(1):19-32. doi:10.1002/ejp.2163</li>
                    <li>Casagrande D, Gugala Z, Clark SM, Lindsey RW. Low back pain and pelvic girdle pain in pregnancy. <i>J Am Acad Orthop Surg</i>. 2023;31(18):921-931. doi:10.5435/JAAOS-D-22-00894</li>
                    <li>Li W, Chen Y, Wang H. Efficacy of Kinesio taping for pregnancy-related low back pain: A systematic review and meta-analysis. <i>Int J Nurs Stud</i>. 2024;149:104631. doi:10.1016/j.ijnurstu.2023.104631</li>
                    <li>American College of Obstetricians and Gynecologists. Management of common musculoskeletal complaints during pregnancy. <i>ACOG Clinical Practice Guideline No. 4.</i> 2023;141(5):e481-e490. doi:10.1097/AOG.0000000000005171</li>
                </ol>
                
                <p class="mt-8 text-xs text-center text-gray-500">
                    <strong>Penting:</strong> Materi ini hanya untuk tujuan edukasi dan tidak menggantikan nasihat medis profesional. Selalu konsultasikan dengan dokter atau penyedia layanan kesehatan Anda mengenai diagnosis dan penanganan kondisi Anda.
                </p>
            </section>
            
            <!-- Bagian Baru Kuis -->
            <section id="kuis" class="content-section">
                <h2 class="text-2xl font-semibold mb-6 text-teal-700">Kuis Interaktif: Uji Pengetahuan Anda!</h2>
                
                <div id="quiz-container" class="space-y-6">
                    <div id="question-container" class="hidden">
                        <p id="question-text" class="text-lg font-medium text-neutral-800 mb-4"></p>
                        <div id="answer-options" class="grid grid-cols-1 md:grid-cols-2 gap-3">
                            <!-- Opsi jawaban akan di-generate oleh JS -->
                        </div>
                        <button id="next-question-btn" class="hidden mt-6 inline-flex justify-center items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-all">
                            Pertanyaan Berikutnya
                        </button>
                    </div>

                    <div id="quiz-results" class="hidden text-center space-y-4 p-6 bg-amber-50 rounded-lg">
                        <h3 class="text-xl font-semibold text-neutral-800">Hasil Kuis Selesai!</h3>
                        <p id="score-text" class="text-2xl font-bold text-teal-700"></p>
                        <button id="restart-quiz-btn" class="inline-flex justify-center items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-all">
                            Ulangi Kuis
                        </button>
                    </div>

                    <div id="start-quiz-container" class="text-center">
                        <p class="mb-4 text-neutral-700">Tes pemahaman Anda tentang materi nyeri punggung pada kehamilan.</p>
                        <button id="start-quiz-btn" class="inline-flex justify-center items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-all">
                            Mulai Kuis
                        </button>
                    </div>
                </div>
            </section>
            <!-- Akhir Bagian Baru Kuis -->
            
            <!-- Bagian Baru Skrining Mandiri -->
            <section id="skrining" class="content-section">
                <h2 class="text-2xl font-semibold mb-4 text-teal-700">Skrining Mandiri Faktor Risiko</h2>
                
                <div class="disclaimer-box">
                    <h3 class="font-bold">PENTING: BUKAN DIAGNOSIS MEDIS</h3>
                    <p class="text-sm">Kuis ini adalah alat bantu edukasi untuk membantu Anda mengidentifikasi faktor risiko umum. Ini <strong>TIDAK</strong> menggantikan diagnosis, skrining, atau nasihat dari dokter, bidan, atau fisioterapis Anda. Gunakan hasil ini sebagai bahan diskusi dengan profesional kesehatan Anda.</p>
                </div>

                <div id="screening-container">
                    <p class="mb-4 text-neutral-700">Jawab "Ya" pada pernyataan di bawah ini yang sesuai dengan kondisi Anda.</p>
                    
                    <div id="screening-questions" class="space-y-4">
                        <label class="flex justify-between items-center p-4 border rounded-lg hover:bg-gray-50 transition-colors">
                            <span class="text-neutral-800 max-w-[80%]">Apakah Anda pernah mengalami nyeri punggung kronis atau signifikan <strong>sebelum</strong> kehamilan ini?</span>
                            <input type="checkbox" class="screening-checkbox">
                        </label>
                        <label class="flex justify-between items-center p-4 border rounded-lg hover:bg-gray-50 transition-colors">
                            <span class="text-neutral-800 max-w-[80%]">Apakah Anda mengalami nyeri punggung pada kehamilan <strong>sebelumnya</strong>? (Jika ini bukan kehamilan pertama Anda)</span>
                            <input type="checkbox" class="screening-checkbox">
                        </label>
                        <label class="flex justify-between items-center p-4 border rounded-lg hover:bg-gray-50 transition-colors">
                            <span class="text-neutral-800 max-w-[80%]">Apakah Indeks Massa Tubuh (IMT / BMI) Anda berada dalam kategori <i>overweight</i> atau <i>obesitas</i> <strong>sebelum</strong> hamil?</span>
                            <input type="checkbox" class="screening-checkbox">
                        </label>
                        <label class="flex justify-between items-center p-4 border rounded-lg hover:bg-gray-50 transition-colors">
                            <span class="text-neutral-800 max-w-[80%]">Apakah pekerjaan Anda mengharuskan Anda sering membungkuk, mengangkat berat, atau berdiri sangat lama?</span>
                            <input type="checkbox" class="screening-checkbox">
                        </label>
                        <label class="flex justify-between items-center p-4 border rounded-lg hover:bg-gray-50 transition-colors">
                            <span class="text-neutral-800 max-w-[80%]">Apakah Anda merasa gaya hidup Anda (di luar pekerjaan) cenderung tidak aktif (banyak duduk/sedentari)?</span>
                            <input type="checkbox" class="screening-checkbox">
                        </label>
                    </div>

                    <button id="show-screening-results-btn" class="mt-6 w-full md:w-auto inline-flex justify-center items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-all">
                        Lihat Hasil Skrining
                    </button>
                </div>

                <div id="screening-results" class="hidden text-center space-y-4 p-6 bg-amber-50 rounded-lg">
                    <h3 class="text-xl font-semibold text-neutral-800">Hasil Ceklis Anda:</h3>
                    <p id="screening-score-text" class="text-2xl font-bold text-teal-700"></p>
                    <p id="screening-advice-text" class="text-neutral-700 max-w-2xl mx-auto"></p>
                    <p class="font-bold text-neutral-800">Langkah Selanjutnya: Diskusikan poin-poin yang Anda centang dengan dokter atau bidan Anda pada kunjungan berikutnya.</p>
                    <button id="reset-screening-btn" class="inline-flex justify-center items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-all">
                        Ulangi Ceklis
                    </button>
                </div>
            </section>
            <!-- Akhir Bagian Baru Skrining Mandiri -->
            
        </main>

    </div>

    <script>
        async function callGeminiAPI(systemPrompt, userQuery) {
            const apiKey = "AIzaSyCsS8jv5Mx_cV1EzwMlz21xY5JlqC344Bo"; 
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: {
                    parts: [{ text: systemPrompt }]
                },
            };

            let response;
            let retries = 0;
            const maxRetries = 3;
            let delay = 1000;

            while (retries < maxRetries) {
                try {
                    response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (response.ok) {
                        const result = await response.json();
                        const candidate = result.candidates?.[0];
                        if (candidate && candidate.content?.parts?.[0]?.text) {
                            return candidate.content.parts[0].text;
                        } else {
                            throw new Error("Respon AI tidak valid atau kosong.");
                        }
                    } else if (response.status === 429 || response.status >= 500) {
                        throw new Error(`Server error ${response.status}`);
                    } else {
                        const errorResult = await response.json();
                        throw new Error(errorResult.error?.message || "Gagal menghubungi API.");
                    }

                } catch (error) {
                    console.error(error);
                    retries++;
                    if (retries >= maxRetries) {
                        return `Terjadi kesalahan: ${error.message}. Silakan coba lagi nanti.`;
                    }
                    await new Promise(resolve => setTimeout(resolve, delay));
                    delay *= 2; 
                }
            }
            return "Gagal menghasilkan kiat setelah beberapa kali percobaan.";
        }

        document.addEventListener('DOMContentLoaded', function () {
            
            const prevalenceCtx = document.getElementById('prevalenceChart').getContext('2d');
            new Chart(prevalenceCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Mengalami NPB', 'Tidak Mengalami NPB'],
                    datasets: [{
                        label: 'Prevalensi NPB',
                        data: [70, 30],
                        backgroundColor: [
                            'rgb(20, 184, 166)',
                            'rgb(209, 213, 219)'
                        ],
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.label + ': ' + context.raw + '%';
                                }
                            }
                        }
                    }
                }
            });

            const trimesterCtx = document.getElementById('trimesterChart').getContext('2d');
            new Chart(trimesterCtx, {
                type: 'bar',
                data: {
                    labels: ['Trimester 1', 'Trimester 2', 'Trimester 3'],
                    datasets: [{
                        label: 'Laporan Pertama Timbulnya Nyeri (%)',
                        data: [18, 42, 40],
                        backgroundColor: [
                            'rgba(13, 148, 136, 0.6)',
                            'rgba(13, 148, 136, 0.8)',
                            'rgba(13, 148, 136, 1.0)'
                        ],
                        borderColor: 'rgba(13, 148, 136, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    scales: {
                        x: {
                            beginAtZero: true,
                            max: 50,
                            ticks: {
                                callback: function(value) {
                                    return value + '%'
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ': ' + context.raw + '%';
                                }
                            }
                        }
                    }
                }
            });

            const tabButtons = document.querySelectorAll('.tab-button');
            const contentSections = document.querySelectorAll('.content-section');
            const tabNav = document.getElementById('tab-nav');

            tabNav.addEventListener('click', function (e) {
                if (e.target.classList.contains('tab-button')) {
                    const tabId = e.target.getAttribute('data-tab');

                    tabButtons.forEach(btn => {
                        btn.classList.remove('active');
                    });
                    contentSections.forEach(section => {
                        section.classList.remove('active');
                    });

                    e.target.classList.add('active');
                    document.getElementById(tabId).classList.add('active');
                }
            });

            const accordionContainer = document.getElementById('accordion-container');
            accordionContainer.addEventListener('click', function(e) {
                const header = e.target.closest('.accordion-header');
                if (!header) return;

                const item = header.parentElement;
                const content = header.nextElementSibling;
                const icon = header.querySelector('.accordion-icon');

                if (content.classList.contains('active')) {
                    content.classList.remove('active');
                    icon.textContent = '+';
                } else {
                    content.classList.add('active');
                    icon.textContent = '−';
                }
            });

            const generateButton = document.getElementById('generateTipsButton');
            const loadingIndicator = document.getElementById('loadingIndicator');
            const tipsResult = document.getElementById('tipsResult');
            const trimesterSelect = document.getElementById('ai-trimester');
            const activitySelect = document.getElementById('ai-activity');
            const focusSelect = document.getElementById('ai-focus');

            if (generateButton) {
                generateButton.addEventListener('click', async function() {
                    generateButton.disabled = true;
                    loadingIndicator.classList.remove('hidden');
                    tipsResult.classList.add('hidden');
                    tipsResult.innerHTML = '';

                    const trimester = trimesterSelect.options[trimesterSelect.selectedIndex].text;
                    const activity = activitySelect.options[activitySelect.selectedIndex].text;
                    const focus = focusSelect.options[focusSelect.selectedIndex].text;

                    const systemPrompt = "Anda adalah asisten kesehatan kehamilan yang suportif dan berpengetahuan. Berikan 3-5 kiat perawatan diri yang aman, praktis, dan umum untuk nyeri punggung berdasarkan situasi pengguna. Selalu ingatkan pengguna bahwa ini bukan nasihat medis dan harus berkonsultasi dengan dokter. JANGAN memberikan nasihat medis yang spesifik atau diagnosis. Gunakan bahasa Indonesia. Format jawaban sebagai daftar poin HTML (`<ul>` dan `<li>`).";
                    
                    const userQuery = `Saya sedang hamil ${trimester}. Tingkat aktivitas harian saya ${activity}. Saya merasakan nyeri yang fokus di area ${focus}. Berikan saya beberapa kiat perawatan diri umum.`;

                    try {
                        const resultText = await callGeminiAPI(systemPrompt, userQuery);
                        
                        let formattedResult = resultText.replace(/\n/g, '<br>');
                        if (!formattedResult.includes('<li>')) {
                             formattedResult = '<p>' + formattedResult.replace(/<br><br>/g, '</p><p>').replace(/<br>/g, '</p><p>') + '</p>';
                        }
                        
                        tipsResult.innerHTML = formattedResult;

                    } catch (error) {
                        tipsResult.innerHTML = `<p class="text-red-700">Maaf, terjadi kesalahan saat menghasilkan kiat. Silakan coba lagi nanti.</p><p class="text-xs text-gray-500">${error.message}</p>`;
                    } finally {
                        generateButton.disabled = false;
                        loadingIndicator.classList.add('hidden');
                        tipsResult.classList.remove('hidden');
                    }
                });
            }

            // Logika Kuis Baru
            const quizData = [
                {
                    question: "Berapa prevalensi nyeri punggung bawah (NPB) pada ibu hamil menurut studi terbaru?",
                    options: ["10-20%", "25-40%", "50-80%", "90-100%"],
                    correctAnswer: "50-80%"
                },
                {
                    question: "Hormon apa yang meningkat selama kehamilan yang menyebabkan pelunakan ligamen dan dapat berkontribusi pada nyeri punggung?",
                    options: ["Estrogen", "Progesteron", "Testosteron", "Relaksin"],
                    correctAnswer: "Relaksin"
                },
                {
                    question: "Pergeseran pusat gravitasi ke depan saat hamil sering menyebabkan peningkatan lengkungan pada punggung bawah, yang disebut...",
                    options: ["Kifosis", "Lordosis", "Skoliosis", "Spondilosis"],
                    correctAnswer: "Lordosis"
                },
                {
                    question: "Obat pereda nyeri lini pertama apa yang umumnya dianggap paling aman untuk digunakan (dalam dosis rendah) selama kehamilan jika diperlukan?",
                    options: ["Ibuprofen", "Aspirin", "Parasetamol (Asetaminofen)", "Naproxen"],
                    correctAnswer: "Parasetamol (Asetaminofen)"
                },
                {
                    question: "Jenis latihan apa yang direkomendasikan untuk mengurangi beban pada sendi dan tulang belakang selama hamil?",
                    options: ["Lari maraton", "Latihan akuatik (di air)", "Angkat berat", "Sprint"],
                    correctAnswer: "Latihan akuatik (di air)"
                }
            ];

            let currentQuestionIndex = 0;
            let score = 0;

            const questionContainer = document.getElementById('question-container');
            const questionText = document.getElementById('question-text');
            const answerOptions = document.getElementById('answer-options');
            const nextQuestionBtn = document.getElementById('next-question-btn');
            const quizResults = document.getElementById('quiz-results');
            const scoreText = document.getElementById('score-text');
            const restartQuizBtn = document.getElementById('restart-quiz-btn');
            const startQuizBtn = document.getElementById('start-quiz-btn');
            const startQuizContainer = document.getElementById('start-quiz-container');

            function startQuiz() {
                currentQuestionIndex = 0;
                score = 0;
                startQuizContainer.classList.add('hidden');
                quizResults.classList.add('hidden');
                questionContainer.classList.remove('hidden');
                nextQuestionBtn.classList.add('hidden');
                showQuestion();
            }

            function showQuestion() {
                resetState();
                const question = quizData[currentQuestionIndex];
                questionText.textContent = question.question;
                
                question.options.forEach(option => {
                    const button = document.createElement('button');
                    button.textContent = option;
                    button.classList.add('quiz-option');
                    button.addEventListener('click', () => selectAnswer(option, button));
                    answerOptions.appendChild(button);
                });
            }

            function resetState() {
                nextQuestionBtn.classList.add('hidden');
                while (answerOptions.firstChild) {
                    answerOptions.removeChild(answerOptions.firstChild);
                }
            }

            function selectAnswer(selectedOption, buttonElement) {
                const correct = selectedOption === quizData[currentQuestionIndex].correctAnswer;
                
                if (correct) {
                    score++;
                    buttonElement.classList.add('correct');
                } else {
                    buttonElement.classList.add('wrong');
                }

                Array.from(answerOptions.children).forEach(button => {
                    if (button.textContent === quizData[currentQuestionIndex].correctAnswer) {
                        button.classList.add('correct');
                    }
                    button.disabled = true;
                });

                nextQuestionBtn.classList.remove('hidden');
            }

            function showNextQuestion() {
                currentQuestionIndex++;
                if (currentQuestionIndex < quizData.length) {
                    showQuestion();
                } else {
                    showResults();
                }
            }

            function showResults() {
                questionContainer.classList.add('hidden');
                quizResults.classList.remove('hidden');
                scoreText.textContent = `Anda benar ${score} dari ${quizData.length} pertanyaan!`;
            }

            function restartQuiz() {
                quizResults.classList.add('hidden');
                startQuizContainer.classList.remove('hidden');
            }

            startQuizBtn.addEventListener('click', startQuiz);
            nextQuestionBtn.addEventListener('click', showNextQuestion);
            restartQuizBtn.addEventListener('click', restartQuiz);
            // Akhir Logika Kuis

            // Logika Skrining Mandiri Baru
            const screeningContainer = document.getElementById('screening-container');
            const screeningQuestions = document.getElementById('screening-questions');
            const showScreeningResultsBtn = document.getElementById('show-screening-results-btn');
            const screeningResults = document.getElementById('screening-results');
            const screeningScoreText = document.getElementById('screening-score-text');
            const screeningAdviceText = document.getElementById('screening-advice-text');
            const resetScreeningBtn = document.getElementById('reset-screening-btn');
            const screeningCheckboxes = screeningQuestions.querySelectorAll('.screening-checkbox');

            function showScreeningResults() {
                let score = 0;
                screeningCheckboxes.forEach(checkbox => {
                    if (checkbox.checked) {
                        score++;
                    }
                });

                const total = screeningCheckboxes.length;
                screeningScoreText.textContent = `Anda memiliki ${score} dari ${total} faktor risiko umum.`;

                let advice = "";
                if (score === 0) {
                    advice = "Ini adalah awal yang baik! Meskipun Anda tidak memiliki faktor risiko umum ini, tetap penting untuk menjaga postur tubuh yang baik dan tetap aktif secara aman selama kehamilan.";
                } else if (score <= 2) {
                    advice = "Anda memiliki beberapa faktor risiko umum. Ini adalah poin-poin yang sangat baik untuk didiskusikan dengan dokter Anda untuk merencanakan strategi pencegahan, seperti latihan yang tepat atau penyesuaian postur.";
                } else {
                    advice = "Anda memiliki beberapa faktor yang diketahui dapat berkontribusi pada nyeri punggung. Sangat disarankan untuk berbicara secara proaktif dengan dokter atau fisioterapis Anda. Mereka dapat memberi Anda strategi pencegahan dan penanganan yang disesuaikan untuk Anda.";
                }
                screeningAdviceText.textContent = advice;
                
                screeningContainer.classList.add('hidden');
                screeningResults.classList.remove('hidden');
            }

            function resetScreening() {
                screeningResults.classList.add('hidden');
                screeningContainer.classList.remove('hidden');
                screeningCheckboxes.forEach(checkbox => {
                    checkbox.checked = false;
                });
            }

            showScreeningResultsBtn.addEventListener('click', showScreeningResults);
            resetScreeningBtn.addEventListener('click', resetScreening);
            // Akhir Logika Skrining Mandiri

        });
    </script>

</body>
</html>


